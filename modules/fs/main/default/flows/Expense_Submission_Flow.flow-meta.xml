<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <assignments>
        <name>assign_Variables</name>
        <label>assign Variables</label>
        <locationX>50</locationX>
        <locationY>782</locationY>
        <assignmentItems>
            <assignToReference>Receipt_Required_Variable</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>check_Expense_Type</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assignment_2</name>
        <label>Assignment 2</label>
        <locationX>50</locationX>
        <locationY>1190</locationY>
        <assignmentItems>
            <assignToReference>Receipt_Required_Variable</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Receipt_Required</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>receiptNotPresent</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ReceiptNotPresent1</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>perDiemOvernightChecks</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Per_Diem_Overnight</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>check_receipt_Required_and_receipt_not_present</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assignment_4</name>
        <label>Assignment 4</label>
        <locationX>50</locationX>
        <locationY>1598</locationY>
        <assignmentItems>
            <assignToReference>ReasonAssignVar</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Reason</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>get_Expense_Record</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Copy_2_of_Assignment_2</name>
        <label>Copy 2 of Assignment 2</label>
        <locationX>314</locationX>
        <locationY>1190</locationY>
        <assignmentItems>
            <assignToReference>Receipt_Required_Variable</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Copy_1_of_Receipt_Required</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>receiptNotPresent</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Copy_1_of_ReceiptNotPresent1</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>perDiemOvernightChecks</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>check_receipt_Required_and_receipt_not_present</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>check_Expense_Type</name>
        <label>check Expense Type</label>
        <locationX>182</locationX>
        <locationY>974</locationY>
        <defaultConnector>
            <targetReference>Copy_1_of_Expension_Submission1</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>per_Diem</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Expense_Category1</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Per Diem</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Expension_Submission1</targetReference>
            </connector>
            <label>per Diem?</label>
        </rules>
    </decisions>
    <decisions>
        <name>check_expense_type_with_Company_Expense_data</name>
        <label>check expense type with Company Expense data</label>
        <locationX>182</locationX>
        <locationY>674</locationY>
        <defaultConnector>
            <targetReference>check_Expense_Type</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Expense_Match_found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>expenseType</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Expense_Category1</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>assign_Variables</targetReference>
            </connector>
            <label>Expense Match found</label>
        </rules>
    </decisions>
    <decisions>
        <name>check_if_Expense_report_exist</name>
        <label>check if Expense report exist</label>
        <locationX>182</locationX>
        <locationY>2522</locationY>
        <defaultConnector>
            <targetReference>expense_report</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Exist</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>ExpesneReportWithStatusNew</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Expense_report_entity</targetReference>
            </connector>
            <label>Exist ?</label>
        </rules>
    </decisions>
    <decisions>
        <name>check_receipt_Required_and_receipt_not_present</name>
        <label>check receipt Required and receipt not present</label>
        <locationX>182</locationX>
        <locationY>1382</locationY>
        <defaultConnector>
            <targetReference>get_Expense_Record</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>true</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Receipt_Required_Variable</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>receiptNotPresent</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Expense_Submission_Flow_3</targetReference>
            </connector>
            <label>true</label>
        </rules>
    </decisions>
    <decisions>
        <name>Upload_File_or_not</name>
        <label>Upload File or not</label>
        <locationX>182</locationX>
        <locationY>2222</locationY>
        <defaultConnector>
            <targetReference>check_if_Expense_report_exist</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Upload</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>receiptNotPresent</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Receipt_Required_Variable</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Upload_Image</targetReference>
            </connector>
            <label>Upload ?</label>
        </rules>
    </decisions>
    <description>#923203 and #915081 this flow is used to create Expense and upload images under Expenses.
998249 :- Modified For This US . Dynamic Validation Implemented instead  of Hard Code .</description>
    <dynamicChoiceSets>
        <name>ExpenseCategory</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>ExpenseCategory__c</picklistField>
        <picklistObject>Expense</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>ExpenseTypevalues</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>ExpenseType</picklistField>
        <picklistObject>Expense</picklistObject>
    </dynamicChoiceSets>
    <environments>Default</environments>
    <interviewLabel>Expense Submission Flow {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Expense Submission Flow</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>FieldServiceMobile</processType>
    <recordCreates>
        <name>Copy_1_of_Expense_report_entity</name>
        <label>Copy 1 of Expense report entity</label>
        <locationX>314</locationX>
        <locationY>2738</locationY>
        <inputAssignments>
            <field>ExpenseId</field>
            <value>
                <elementReference>expenseRecordId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ExpenseReportId</field>
            <value>
                <elementReference>ExpenseReportId</elementReference>
            </value>
        </inputAssignments>
        <object>ExpenseReportEntry</object>
    </recordCreates>
    <recordCreates>
        <name>Create_Expense_Data</name>
        <label>Create Expense Data</label>
        <locationX>182</locationX>
        <locationY>2114</locationY>
        <assignRecordIdToReference>expenseRecordId</assignRecordIdToReference>
        <connector>
            <targetReference>Upload_File_or_not</targetReference>
        </connector>
        <inputAssignments>
            <field>AccountId</field>
            <value>
                <elementReference>workOrder.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Amount</field>
            <value>
                <elementReference>Amount</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Description</field>
            <value>
                <elementReference>Description</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ExpenseCategory__c</field>
            <value>
                <elementReference>Expense_Category1</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ExpenseEndDate</field>
            <value>
                <elementReference>End_Date</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ExpenseStartDate</field>
            <value>
                <elementReference>Start_Date</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ExpenseType</field>
            <value>
                <elementReference>Expense_Type1</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>PerDiemOvernight__c</field>
            <value>
                <elementReference>perDiemOvernightChecks</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ReceiptNotPresentReason__c</field>
            <value>
                <elementReference>ReasonAssignVar</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ReceiptNotPresent__c</field>
            <value>
                <elementReference>receiptNotPresent</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ReceiptRequired__c</field>
            <value>
                <elementReference>Receipt_Required_Variable</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ServiceResource__c</field>
            <value>
                <elementReference>serviceResourceIds</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Title</field>
            <value>
                <elementReference>Title</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>TransactionDate</field>
            <value>
                <elementReference>Transaction_Date</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>WorkOrderId</field>
            <value>
                <elementReference>workOrder.Id</elementReference>
            </value>
        </inputAssignments>
        <object>Expense</object>
    </recordCreates>
    <recordCreates>
        <name>expense_report</name>
        <label>expense report</label>
        <locationX>314</locationX>
        <locationY>2630</locationY>
        <assignRecordIdToReference>ExpenseReportId</assignRecordIdToReference>
        <connector>
            <targetReference>Copy_1_of_Expense_report_entity</targetReference>
        </connector>
        <inputAssignments>
            <field>Description</field>
            <value>
                <elementReference>Description</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status__c</field>
            <value>
                <stringValue>New</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Title</field>
            <value>
                <elementReference>Title</elementReference>
            </value>
        </inputAssignments>
        <object>ExpenseReport</object>
    </recordCreates>
    <recordCreates>
        <name>Expense_report_entity</name>
        <label>Expense report entity</label>
        <locationX>50</locationX>
        <locationY>2630</locationY>
        <inputAssignments>
            <field>ExpenseId</field>
            <value>
                <elementReference>expenseRecordId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ExpenseReportId</field>
            <value>
                <elementReference>ExpesneReportWithStatusNew.Id</elementReference>
            </value>
        </inputAssignments>
        <object>ExpenseReportEntry</object>
    </recordCreates>
    <recordLookups>
        <name>company_Expense_Data</name>
        <label>company Expense Data</label>
        <locationX>182</locationX>
        <locationY>350</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Otis_Expense_Settings</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Company__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>company</elementReference>
            </value>
        </filters>
        <filters>
            <field>Receipt_Required__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>Company_Expense_Settings__c</object>
        <outputAssignments>
            <assignToReference>companyName</assignToReference>
            <field>Company__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>expenseType</assignToReference>
            <field>Expense_Type__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>ReceiptRequired</assignToReference>
            <field>Receipt_Required__c</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>Expense_Reports</name>
        <label>Expense Report</label>
        <locationX>182</locationX>
        <locationY>2006</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Create_Expense_Data</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>latestExpesneEntity.ExpenseReportId</elementReference>
            </value>
        </filters>
        <filters>
            <field>Status__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>New</stringValue>
            </value>
        </filters>
        <object>ExpenseReport</object>
        <outputReference>ExpesneReportWithStatusNew</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Status__c</queriedFields>
        <sortField>CreatedDate</sortField>
        <sortOrder>Desc</sortOrder>
    </recordLookups>
    <recordLookups>
        <name>get_Expense_Record</name>
        <label>get Expense Record</label>
        <locationX>182</locationX>
        <locationY>1790</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>get_Expense_Report_Entries</targetReference>
        </connector>
        <filterLogic>or</filterLogic>
        <filters>
            <field>WorkOrderId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Id</elementReference>
            </value>
        </filters>
        <object>Expense</object>
        <outputReference>latestExpenseRecord</outputReference>
        <queriedFields>Id</queriedFields>
        <sortField>CreatedDate</sortField>
        <sortOrder>Desc</sortOrder>
    </recordLookups>
    <recordLookups>
        <name>get_Expense_Report_Entries</name>
        <label>get Expense Report Entries</label>
        <locationX>182</locationX>
        <locationY>1898</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Expense_Reports</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ExpenseId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>latestExpenseRecord.Id</elementReference>
            </value>
        </filters>
        <object>ExpenseReportEntry</object>
        <outputReference>latestExpesneEntity</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>ExpenseReportId</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Get_Otis_Expense_Settings</name>
        <label>Get Otis Expense Settings</label>
        <locationX>182</locationX>
        <locationY>458</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Expense_Submission</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Company__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>OTIS NAA</stringValue>
            </value>
        </filters>
        <object>OTIS_Expense_Setting__c</object>
        <outputAssignments>
            <assignToReference>testCartage</assignToReference>
            <field>Cartage__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>TestMilege</assignToReference>
            <field>Mileage__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>testOthers</assignToReference>
            <field>Other__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>testPerDiem</assignToReference>
            <field>Per_Diem__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>testZone</assignToReference>
            <field>Zone__c</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>get_Service_Resource</name>
        <label>get Service Resource</label>
        <locationX>182</locationX>
        <locationY>242</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>company_Expense_Data</targetReference>
        </connector>
        <filterLogic>or</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>workOrder.SvcReqAssignedMechanic__c</elementReference>
            </value>
        </filters>
        <object>ServiceResource</object>
        <outputAssignments>
            <assignToReference>company</assignToReference>
            <field>Company__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>serviceResourceIds</assignToReference>
            <field>Id</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>name</assignToReference>
            <field>Name</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>Get_Work_Order</name>
        <label>Get Work Order</label>
        <locationX>182</locationX>
        <locationY>134</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>get_Service_Resource</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Id</elementReference>
            </value>
        </filters>
        <object>WorkOrder</object>
        <outputReference>workOrder</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>WorkOrderNumber</queriedFields>
        <queriedFields>AccountId</queriedFields>
        <queriedFields>SvcReqAssignedMechanic__c</queriedFields>
    </recordLookups>
    <screens>
        <name>Copy_1_of_Expension_Submission1</name>
        <label>Copy 1 of Expension Submission1</label>
        <locationX>314</locationX>
        <locationY>1082</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Copy_2_of_Assignment_2</targetReference>
        </connector>
        <fields>
            <name>Copy_1_of_Receipt_Required</name>
            <dataType>Boolean</dataType>
            <defaultValue>
                <elementReference>ReceiptRequired</elementReference>
            </defaultValue>
            <fieldText>Receipt Required</fieldText>
            <fieldType>InputField</fieldType>
             <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Copy_1_of_ReceiptNotPresent1</name>
            <dataType>Boolean</dataType>
            <defaultValue>
                <booleanValue>false</booleanValue>
            </defaultValue>
            <fieldText>Receipt Not Present</fieldText>
            <fieldType>InputField</fieldType>
             <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Expense_Submission</name>
        <label>Expense Submission</label>
        <locationX>182</locationX>
        <locationY>566</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>check_expense_type_with_Company_Expense_data</targetReference>
        </connector>
        <fields>
            <name>Title</name>
            <dataType>String</dataType>
            <fieldText>Title</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Description</name>
            <dataType>String</dataType>
            <fieldText>Description</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>workOrderScreen</name>
            <fieldText>&lt;p&gt;Work Order :    {!workOrder.WorkOrderNumber}&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Transaction_Date</name>
            <dataType>Date</dataType>
            <fieldText>Transaction Date</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Start_Date</name>
            <dataType>Date</dataType>
            <fieldText>Start Date</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>End_Date</name>
            <dataType>Date</dataType>
            <fieldText>End Date</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>false</isRequired>
        </fields>
        <fields>
            <name>Service_Resource</name>
            <fieldText>&lt;p&gt;Service Resource : {!name}&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Expense_Type1</name>
            <choiceReferences>ExpenseTypevalues</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Expense Type</fieldText>
            <fieldType>DropdownBox</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Expense_Category1</name>
            <choiceReferences>ExpenseCategory</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Expense Category</fieldText>
            <fieldType>DropdownBox</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Amount</name>
            <dataType>Currency</dataType>
            <fieldText>Amount</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>false</isRequired>
            <scale>0</scale>
            <validationRule>
                <errorMessage>&lt;p&gt;Enter The Correct Value for : {!Expense_Category1}&lt;/p&gt;</errorMessage>
                <formulaExpression>OR(
AND(({!Expense_Category1} = &apos;Mileage&apos;),Value(Text({!Amount})) &lt;= Value({!TestMilege})) 
,
AND(({!Expense_Category1} = &apos;Zone&apos;),Value(Text({!Amount})) &lt;= Value({!testZone}))
,
AND(({!Expense_Category1} = &apos;Per Diem&apos;),Value(Text({!Amount})) &lt;= Value({!testPerDiem}))
,
AND(({!Expense_Category1} = &apos;Cartage&apos;),Value(Text({!Amount})) &lt;= Value({!testCartage}))
,
AND(({!Expense_Category1} = &apos;Other&apos;),Value(Text({!Amount})) &lt;= Value({!testOthers}))
)</formulaExpression>
            </validationRule>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Expense_Submission_Flow_3</name>
        <label>Expense Submission Flow 3</label>
        <locationX>50</locationX>
        <locationY>1490</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Assignment_4</targetReference>
        </connector>
        <fields>
            <name>Reason</name>
            <dataType>String</dataType>
            <fieldText>Reason</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Expension_Submission1</name>
        <label>Expension Submission1</label>
        <locationX>50</locationX>
        <locationY>1082</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Assignment_2</targetReference>
        </connector>
        <fields>
            <name>Per_Diem_Overnight</name>
            <dataType>Boolean</dataType>
            <defaultValue>
                <booleanValue>false</booleanValue>
            </defaultValue>
            <fieldText>Per Diem Overnight</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Receipt_Required</name>
            <dataType>Boolean</dataType>
            <defaultValue>
                <elementReference>ReceiptRequired</elementReference>
            </defaultValue>
            <fieldText>Receipt Required</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>ReceiptNotPresent1</name>
            <dataType>Boolean</dataType>
            <defaultValue>
                <booleanValue>false</booleanValue>
            </defaultValue>
            <fieldText>Receipt Not Present</fieldText>
            <fieldType>InputField</fieldType>
             <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Upload_Image</name>
        <label>Upload Image</label>
        <locationX>50</locationX>
        <locationY>2330</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>check_if_Expense_report_exist</targetReference>
        </connector>
        <fields>
            <name>Upload_Receipt_Image</name>
            <extensionName>forceContent:fileUpload</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>label</name>
                <value>
                    <stringValue>Receipt </stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>recordId</name>
                <value>
                    <elementReference>expenseRecordId</elementReference>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <start>
        <locationX>56</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Get_Work_Order</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>allExpenseEntry</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ExpenseReportEntry</objectType>
    </variables>
    <variables>
        <name>allExpenseRecordId</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>AllExpesneReportId</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ExpenseReport</objectType>
    </variables>
    <variables>
        <name>allReportIds</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>alltheReportRecord</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ExpenseReport</objectType>
    </variables>
    <variables>
        <name>company</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>companyName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>ERELoopVar</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ExpenseReportEntry</objectType>
    </variables>
    <variables>
        <name>expenseData</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Expense</objectType>
    </variables>
    <variables>
        <name>expenseEntryNew</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ExpenseReportEntry</objectType>
    </variables>
    <variables>
        <name>ExpenseRecord</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Expense</objectType>
    </variables>
    <variables>
        <name>expenseRecordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>expenseReportEntries</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ExpenseReportEntry</objectType>
    </variables>
    <variables>
        <name>ExpenseReportEntry</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ExpenseReportEntry</objectType>
    </variables>
    <variables>
        <name>ExpenseReportId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>expenseReportIds</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ExpenseReport</objectType>
    </variables>
    <variables>
        <name>expenseReportStatusN</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ExpenseReport</objectType>
    </variables>
    <variables>
        <name>expenseType</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>expesneReport</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ExpenseReport</objectType>
    </variables>
    <variables>
        <name>expesneReportss</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ExpenseReport</objectType>
    </variables>
    <variables>
        <name>ExpesneReportWithStatusNew</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ExpenseReport</objectType>
    </variables>
    <variables>
        <name>expesnesEntriesNew</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ExpenseReportEntry</objectType>
    </variables>
    <variables>
        <name>ExpneseReportData</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ExpenseReport</objectType>
    </variables>
    <variables>
        <name>expnsesReportNewId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>expsenseReport</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ExpenseReport</objectType>
    </variables>
    <variables>
        <name>Id</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>latestExpenseRecord</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Expense</objectType>
    </variables>
    <variables>
        <name>latestExpesneEntity</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ExpenseReportEntry</objectType>
    </variables>
    <variables>
        <name>name</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>PerDiemOverNightCheck</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>perDiemOvernightChecks</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>ReasonAssignVar</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Receipt_Required_Variable</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>receiptNotPresent</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>ReceiptRequired</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>recordIdLoop</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>reportCollection</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>reportCollectionSingle</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>reportID</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ExpenseReport</objectType>
    </variables>
    <variables>
        <name>reportNoNewCollection</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>serviceResourceId</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>ServiceResource</objectType>
    </variables>
    <variables>
        <name>serviceResourceIds</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>StatusIsNew</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ExpenseReport</objectType>
    </variables>
    <variables>
        <name>statusOfTheReport</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>testCartage</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>TestMilege</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>testOthers</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>testPerDiem</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>testZone</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>UserId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>validation1</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>Please enter a valid distance travelled</stringValue>
        </value>
    </variables>
    <variables>
        <name>validation2</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>PerDiem overnight cannot be checked if total per diem is 0 or empty. Cannot save Data.</stringValue>
        </value>
    </variables>
    <variables>
        <name>Validation3</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>Please enter a valid expense</stringValue>
        </value>
    </variables>
    <variables>
        <name>workOrder</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>WorkOrder</objectType>
    </variables>
</Flow>
